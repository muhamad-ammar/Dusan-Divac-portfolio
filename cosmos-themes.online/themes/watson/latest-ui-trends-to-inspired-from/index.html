<!DOCTYPE html>
<html lang="en-US" data-random-animation="true" data-animation="animate-0">
  <!-- Mirrored from cosmos-themes.online/themes/watson/latest-ui-trends-to-inspired-from/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Nov 2021 07:42:30 GMT -->
  <!-- Added by HTTrack -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <!-- /Added by HTTrack -->
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <link media="all" href="../wp-content/cache/autoptimize/css/autoptimize_4a3a25c402079694a1e90497bce44892.css" rel="stylesheet" />
    <title>DUSAN DIVAC &#8211; Blogs</title>
    <meta name='robots' content='max-image-preview:large' />
    <link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
    <link rel='dns-prefetch' href='http://s.w.org/' />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Feed" href="../feed/index.html" />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Comments Feed" href="../comments/feed/index.html" />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Latest UI Trends To Inspired From Comments Feed" href="feed/index.html" />
    <script type="text/javascript">
      window._wpemojiSettings = {
        "baseUrl": "https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/",
        "ext": ".png",
        "svgUrl": "https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/",
        "svgExt": ".svg",
        "source": {
          "concatemoji": "https:\/\/cosmos-themes.online\/themes\/watson\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.2"
        }
      };
      ! function(e, a, t) {
        var n, r, o, i = a.createElement("canvas"),
          p = i.getContext && i.getContext("2d");

        function s(e, t) {
          var a = String.fromCharCode;
          p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, e), 0, 0);
          e = i.toDataURL();
          return p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, t), 0, 0), e === i.toDataURL()
        }

        function c(e) {
          var t = a.createElement("script");
          t.src = e, t.defer = t.type = "text/javascript", a.getElementsByTagName("head")[0].appendChild(t)
        }
        for (o = Array("flag", "emoji"), t.supports = {
            everything: !0,
            everythingExceptFlag: !0
          }, r = 0; r < o.length; r++) t.supports[o[r]] = function(e) {
          if (!p || !p.fillText) return !1;
          switch (p.textBaseline = "top", p.font = "600 32px Arial", e) {
            case "flag":
              return s([127987, 65039, 8205, 9895, 65039], [127987, 65039, 8203, 9895, 65039]) ? !1 : !s([55356, 56826, 55356, 56819], [55356, 56826, 8203, 55356, 56819]) && !s([55356, 57332, 56128, 56423, 56128, 56418, 56128, 56421, 56128, 56430, 56128, 56423, 56128, 56447], [55356, 57332, 8203, 56128, 56423, 8203, 56128, 56418, 8203, 56128, 56421, 8203, 56128, 56430, 8203, 56128, 56423, 8203, 56128, 56447]);
            case "emoji":
              return !s([10084, 65039, 8205, 55357, 56613], [10084, 65039, 8203, 55357, 56613])
          }
          return !1
        }(o[r]), t.supports.everything = t.supports.everything && t.supports[o[r]], "flag" !== o[r] && (t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && t.supports[o[r]]);
        t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && !t.supports.flag, t.DOMReady = !1, t.readyCallback = function() {
          t.DOMReady = !0
        }, t.supports.everything || (n = function() {
          t.readyCallback()
        }, a.addEventListener ? (a.addEventListener("DOMContentLoaded", n, !1), e.addEventListener("load", n, !1)) : (e.attachEvent("onload", n), a.attachEvent("onreadystatechange", function() {
          "complete" === a.readyState && t.readyCallback()
        })), (n = t.source || {}).concatemoji ? c(n.concatemoji) : n.wpemoji && n.twemoji && (c(n.twemoji), c(n.wpemoji)))
      }(window, document, window._wpemojiSettings);
    </script>
    <link rel='stylesheet' id='watson-heading-font-css' href='http://fonts.googleapis.com/css2?family=Playfair+Display%3Aital%2Cwght%400%2C400%3B0%2C500%3B0%2C600%3B0%2C700%3B0%2C800%3B0%2C900%3B1%2C400%3B1%2C500%3B1%2C600%3B1%2C700%3B1%2C800%3B1%2C900&amp;ver=1.0.0' type='text/css' media='all' />
    <link rel='stylesheet' id='watson-body-font-css' href='http://fonts.googleapis.com/css2?family=Roboto%3Aital%2Cwght%400%2C300%3B0%2C400%3B0%2C500%3B0%2C700%3B0%2C900%3B1%2C300%3B1%2C400%3B1%2C500%3B1%2C700%3B1%2C900&amp;ver=1.0.0' type='text/css' media='all' />
    <script type='text/javascript' src='../wp-includes/js/jquery/jquery.minaf6c.js?ver=3.6.0' id='jquery-core-js'></script>
    <link rel="https://api.w.org/" href="../wp-json/index.html" />
    <link rel="alternate" type="application/json" href="../wp-json/wp/v2/posts/114.json" />
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" />
    <meta name="generator" content="WordPress 5.8.2" />
    <link rel="canonical" href="index.html" />
    <link rel='shortlink' href='../index30a5.html?p=114' />
    <link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed04b0.json?url=https%3A%2F%2Fcosmos-themes.online%2Fthemes%2Fwatson%2Flatest-ui-trends-to-inspired-from%2F" />
    <link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embede142?url=https%3A%2F%2Fcosmos-themes.online%2Fthemes%2Fwatson%2Flatest-ui-trends-to-inspired-from%2F&amp;format=xml" />
    <link rel="icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-32x32.png" sizes="32x32" />
    <link rel="icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-192x192.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-180x180.png" />
    <meta name="msapplication-TileImage" content="https://cosmos-themes.online/themes/watson/wp-content/uploads/2021/05/cropped-watson-sicon-270x270.png" />
  </head>
  <body class="post-template-default single single-post postid-114 single-format-standard wp-embed-responsive elementor-default elementor-kit-8">
    <div class="preloader">
      <div class="loader">
        <h4>DUSAN DIVAC</h4>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div id="page">
      <header>
        <div class="header-content">
          <div class="header-mobile">
            <h2>DUSAN DIVAC</h2>
          </div>
          <div class="header-main">
            <a class="header-toggle">
              <i class="menu-open fas fa-bars"></i>
              <i class="menu-close fas fa-times"></i>
            </a>
            <div class="header-main-inner" data-simplebar>
              <div class="nav-container">
                <div class="image-container">
                  <h2 class="header-name">DUSAN DIVAC</h2>
                  <img src="../wp-content/uploads/2021/05/profile-img.jpg" alt="Profile Image">
                </div>
                <nav id="primary-menu" class="nav-menu slide-menu">
                  <ul id="menu-main-menu" class="menu">
                    <li data-id="menu-item-54" class=" menu-item menu-item-type-post_type menu-item-object-page menu-item-home has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#home" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-home'></i>
                        </span>Home </a>
                    </li>
                    <li data-id="menu-item-57" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#about" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-user'></i>
                        </span>About Me </a>
                    </li>
                    <li data-id="menu-item-55" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#resume" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-license'></i>
                        </span>Resume </a>
                    </li>
                    <li data-id="menu-item-88" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#portfolio" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-briefcase'></i>
                        </span>Portfolio </a>
                    </li>
                    <li data-id="menu-item-89" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#blog" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-book'></i>
                        </span>Blog </a>
                    </li>
                    <li data-id="menu-item-70" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="https://cosmos-themes.online/themes/watson#contact" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-envelope'></i>
                        </span>Contact </a>
                    </li>
                  </ul>
                </nav>
                <div class="nav-footer">
                  <ul class="social">
                    <li>
                      <a href="#">
                        <i class="fab fa-facebook-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-twitter-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-youtube-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-dribbble-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-behance-square"></i>
                      </a>
                    </li>
                  </ul>
                  <div class="copy">
                    <p>2021 © Cosmos-Themes. <br>All Right Reserved. </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div id="sidebar">
        <div class="sidebar-button">
          <span class="icon">
            <i class="fa fa-arrow-left"></i>
          </span>
        </div>
        <div class="sidebar-content">
          <div class="sidebar-content-wrapper">
            <div id="search-2" class="watson-single-widget widget_meta widget_search">
              <form class="search-form" role="search" method="get" action="https://cosmos-themes.online/themes/watson/">
                <label>
                  <span class="screen-reader-text">Search for:</span>
                  <input type="search" class="search-field" placeholder="Search..." value="" name="s">
                </label>
                <input type="submit" class="search-submit" value="Search">
              </form>
            </div>
            <div id="recent-posts-2" class="watson-single-widget widget_meta widget_recent_entries">
              <h4 class="widget-title">Recent Posts</h4>
              <ul>
                <li>
                  <a href="../best-way-to-design/index.html">Best Way To Design</a>
                </li>
                <li>
                  <a href="../things-i-need-to-get-started/index.html">Things I Need To Get Started</a>
                </li>
                <li>
                  <a href="../my-current-workspace/index.html">My Current Workspace</a>
                </li>
                <li>
                  <a href="../best-place-to-travel-this-summer/index.html">Best Place To Travel This Summer</a>
                </li>
                <li>
                  <a href="index.html" aria-current="page">Latest UI Trends To Inspired From</a>
                </li>
              </ul>
            </div>
            <div id="categories-3" class="watson-single-widget widget_meta widget_categories">
              <h4 class="widget-title">Categories</h4>
              <ul>
                <li class="cat-item cat-item-8">
                  <a href="../category/design/index.html">Design</a>
                </li>
                <li class="cat-item cat-item-6">
                  <a href="../category/lifestyle/index.html">Lifestyle</a>
                </li>
                <li class="cat-item cat-item-9">
                  <a href="../category/personal/index.html">Personal</a>
                </li>
                <li class="cat-item cat-item-5">
                  <a href="../category/technology/index.html">Technology</a>
                </li>
                <li class="cat-item cat-item-4">
                  <a href="../category/traveling/index.html">Traveling</a>
                </li>
                <li class="cat-item cat-item-7">
                  <a href="../category/web-design/index.html">Web Design</a>
                </li>
              </ul>
            </div>
            <div id="recent-comments-2" class="watson-single-widget widget_meta widget_recent_comments">
              <h4 class="widget-title">Recent Comments</h4>
              <ul id="recentcomments">
                <li class="recentcomments">
                  <span class="comment-author-link">Watson Admin</span> on <a href="../best-way-to-design/index.html#comment-6">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Terry K. Gaitan</span> on <a href="../best-way-to-design/index.html#comment-5">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Rebecca R. Smith</span> on <a href="../best-way-to-design/index.html#comment-4">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Randy E. Oleary</span> on <a href="../best-way-to-design/index.html#comment-3">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">John Doe</span> on <a href="../best-way-to-design/index.html#comment-2">Best Way To Design</a>
                </li>
              </ul>
            </div>
            <div id="meta-3" class="watson-single-widget widget_meta widget_meta">
              <h4 class="widget-title">Meta</h4>
              <ul>
                <li>
                  <a href="../wp-login.html">Log in</a>
                </li>
                <li>
                  <a href="../feed/index.html">Entries feed</a>
                </li>
                <li>
                  <a href="../comments/feed/index.html">Comments feed</a>
                </li>
                <li>
                  <a href="https://wordpress.org/">WordPress.org</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div id="main" class="site-main">
        <div id="post-114" class="post-page post-114 post type-post status-publish format-standard has-post-thumbnail hentry category-web-design tag-design tag-inspiration tag-technology">
          <div class="post-image">
            <img src="../wp-content/uploads/2021/05/blog-5.jpg" alt="Post Image">
          </div>
          <div class="post-wrapper">
            <div class="post-container has-thumbnail">
              <div class="row">
                <div class="post-heading col-md-8 offset-md-2">
                  <div class="categories">
                    <a class="category-name" href="../category/web-design/index.html">Frontend</a>
                  </div>
                  <h1 class="post-title">How to unit test Vuex modules defined with the vuex-module-decorators syntax in Nuxt, using vue-test-utils and Jest?</h1>
                  <span class="post-date">Sep 28, 2021</span>
                </div>
                <div class="post-content col-md-10 offset-md-1">
                  
<h1>
	<a name="the-problem" href="#the-problem">
	</a>
	The problem
  </h1>
  
  <p>To find the answer to my question I went through the official Nuxt documentation and through the existing Stack Overflow and Github issue discussions.</p>
  
  <p>But with no luck. </p>
  
  <p>My AuthModule looks something like this:<br>
  </p>
  
  <div class="highlight js-code-highlight">
  <pre class="highlight typescript"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
	<span class="na">stateFactory</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
	<span class="na">namespaced</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">AuthModule</span> <span class="kd">extends</span> <span class="nx">VuexModule</span> <span class="p">{</span>
	<span class="nl">userData</span><span class="p">?:</span> <span class="nx">UserData</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
	<span class="nl">prevRouteList</span><span class="p">:</span> <span class="nx">Routes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="nl">error</span><span class="p">?:</span> <span class="nx">services</span><span class="p">.</span><span class="nx">ICognitoError</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
	<span class="nx">isLoading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">...</span>
  
	<span class="p">@</span><span class="nd">VuexMutation</span>
	<span class="nx">setIsLoading</span><span class="p">(</span><span class="nx">isLoading</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
	  <span class="k">this</span><span class="p">.</span><span class="nx">isLoading</span> <span class="o">=</span> <span class="nx">isLoading</span><span class="p">;</span>
	<span class="p">}</span>
  
	<span class="p">...</span>
  
	 <span class="p">@</span><span class="nd">VuexAction</span><span class="p">({</span> <span class="na">rawError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
	<span class="k">async</span> <span class="nx">register</span><span class="p">(</span><span class="nx">registerData</span><span class="p">:</span> <span class="p">{</span> <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">password</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="p">{</span>
	  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setIsLoading</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
	  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setError</span><span class="dl">'</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span>
	  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setInitiateRegistration</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">setEmail</span><span class="dl">'</span><span class="p">,</span> <span class="nx">registerData</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
  
	  <span class="k">try</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="p">{</span> <span class="nx">user</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">services</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">registerData</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span> <span class="nx">registerData</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
  
		<span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
		  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">pushPrevRoute</span><span class="dl">'</span><span class="p">,</span> <span class="nx">Routes</span><span class="p">.</span><span class="nx">emailVerification</span><span class="p">);</span>
		  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setInitiateRegistration</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
		<span class="p">}</span>
	  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setError</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setInitiateRegistration</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	  <span class="p">}</span>
  
	  <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setIsLoading</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	<span class="p">}</span>
  
	<span class="p">...</span>
  
	<span class="p">@</span><span class="nd">MutationAction</span>
	<span class="nx">setEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span>  <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
  
	<span class="p">...</span> 
  
	<span class="kd">get</span> <span class="nx">getEmail</span><span class="p">()</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="p">;</span>
	<span class="p">}</span>
  
	<span class="p">...</span> 
  
  <span class="p">}</span>
  </code></pre>
  <div class="highlight__panel js-actions-panel">
  <div class="highlight__panel-action js-fullscreen-code-action">
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
	  <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
  </svg>
  
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
	  <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
  </svg>
  
  </div>
  </div>
  </div>
  
  
  
  <h1>
	<a name="the-solution" href="#the-solution">
	</a>
	The solution
  </h1>
  
  <p>After some trial and error I finally discovered the answer to my question. </p>
  
  <p>The implementation looks like this:<br>
  </p>
  
  <div class="highlight js-code-highlight">
  <pre class="highlight typescript"><code><span class="c1">// auth.spec.ts</span>
  
  <span class="k">import</span> <span class="nx">Vuex</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Store</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">createLocalVue</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@vue/test-utils</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="k">import</span> <span class="nx">AuthModule</span><span class="p">,</span> <span class="p">{</span> <span class="nx">IState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./auth</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">'</span><span class="s1">@/services</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="kd">const</span> <span class="nx">localVue</span> <span class="o">=</span> <span class="nx">createLocalVue</span><span class="p">();</span>
  <span class="nx">localVue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Vuex</span><span class="p">);</span>
  
  <span class="kd">const</span> <span class="nx">storeOptions</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">modules</span><span class="p">:</span> <span class="p">{</span>
	  <span class="na">auth</span><span class="p">:</span> <span class="nx">AuthModule</span><span class="p">,</span>
	<span class="p">},</span>
  <span class="p">};</span>
  
  <span class="kd">const</span> <span class="nx">createStore</span> <span class="o">=</span> <span class="p">(</span><span class="nx">storeOptions</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="p">{}):</span> <span class="nx">Store</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">auth</span><span class="p">:</span> <span class="nx">IState</span> <span class="p">}</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span> <span class="p">...</span><span class="nx">storeOptions</span> <span class="p">});</span>
  
  <span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">AuthModule</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">let</span> <span class="na">store</span><span class="p">:</span> <span class="nx">Store</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">auth</span><span class="p">:</span> <span class="nx">IState</span> <span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
  
	<span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">storeOptions</span><span class="p">);</span>
	<span class="p">});</span>
  
	<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">mutations</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="c1">// ...</span>
  
	  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth/setIsLoading</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">isLoading</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
		<span class="nx">store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth/setIsLoading</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">isLoading</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
	  <span class="p">});</span>
  
	  <span class="c1">// ...</span>
	<span class="p">});</span>
  
	<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">actions</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="c1">// ...</span>
  
	  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">register success</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="nx">registerData</span> <span class="o">=</span> <span class="p">{</span>
		  <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dummy@email.com</span><span class="dl">'</span><span class="p">,</span>
		  <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dummy</span><span class="dl">'</span><span class="p">,</span>
		<span class="p">};</span>
  
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">registrationInitiated</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  
		<span class="k">try</span> <span class="p">{</span>
		  <span class="k">await</span> <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth/register</span><span class="dl">'</span><span class="p">,</span> <span class="nx">registerData</span><span class="p">);</span>
		  <span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">registrationInitiated</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{}</span>
	  <span class="p">});</span>
  
	  <span class="c1">// ...</span>
	<span class="p">});</span>
  
	<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">mutation-actions</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="c1">// ...</span>
  
	  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">setEmail</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="nx">dummyEmail</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">dummy@email.com</span><span class="dl">'</span><span class="p">;</span>
  
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">email</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
		<span class="k">await</span> <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth/setEmail</span><span class="dl">'</span><span class="p">,</span> <span class="nx">dummyEmail</span><span class="p">);</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">email</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">dummyEmail</span><span class="p">);</span>
	  <span class="p">});</span>
  
	  <span class="c1">// ...</span>
	<span class="p">});</span>
  
	<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">getters</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="c1">// ...</span>
  
	  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">auth/getError</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getters</span><span class="p">[</span><span class="dl">'</span><span class="s1">auth/getError</span><span class="dl">'</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
  
		<span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">error</span> <span class="k">as</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Demmo error</span><span class="dl">'</span><span class="p">;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getters</span><span class="p">[</span><span class="dl">'</span><span class="s1">auth/getError</span><span class="dl">'</span><span class="p">]).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Demmo error</span><span class="dl">'</span><span class="p">);</span>
	  <span class="p">});</span>
  
	  <span class="c1">// ...</span>
	<span class="p">});</span>
  <span class="p">});</span>
  
  <span class="c1">// services/auth</span>
  
  <span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">register</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">attr</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="p">{}):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="k">try</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="k">await</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">signUp</span><span class="p">({</span>
		<span class="na">username</span><span class="p">:</span> <span class="nx">email</span><span class="p">,</span>
		<span class="nx">password</span><span class="p">,</span>
		<span class="na">attributes</span><span class="p">:</span> <span class="p">{</span>
		  <span class="p">...</span><span class="nx">attr</span><span class="p">,</span>
		<span class="p">},</span>
	  <span class="p">});</span>
	<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="na">err</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">createError</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="dl">'</span><span class="s1">register</span><span class="dl">'</span><span class="p">));</span>
	<span class="p">}</span>
  <span class="p">}</span>
  
  <span class="c1">// createError is just a util method for formatting the error message and wiring to the correct i18n label</span>
  
  <span class="c1">// services/__mock__/auth</span>
  
  <span class="k">import</span> <span class="p">{</span> <span class="nx">createError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../auth</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="k">export</span> <span class="kd">const</span> <span class="nx">register</span> <span class="o">=</span> <span class="p">(</span><span class="nx">registerData</span><span class="p">:</span> <span class="p">{</span> <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">password</span><span class="p">:</span> <span class="kr">string</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="k">try</span> <span class="p">{</span>
	  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">registerData</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">dummy error</span><span class="dl">'</span><span class="p">);</span>
	  <span class="p">}</span>
  
	  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">({</span> <span class="na">response</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">registerData</span><span class="p">.</span><span class="nx">email</span> <span class="p">}</span> <span class="p">}));</span>
	<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">createError</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="dl">'</span><span class="s1">register</span><span class="dl">'</span><span class="p">));</span>
	<span class="p">}</span>
  <span class="p">};</span>
  
  </code></pre>
  <div class="highlight__panel js-actions-panel">
  <div class="highlight__panel-action js-fullscreen-code-action">
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
	  <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
  </svg>
  
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
	  <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
  </svg>
  
  </div>
  </div>
  </div>
  
  
  
  <p>The most important thing to realise is that the <a href="https://github.com/championswimmer/vuex-module-decorators">vuex-module-decorators</a> class-based module behaves just like a <a href="https://class-component.vuejs.org/">vue-class-component</a> under the hood.</p>
  
  <p>All of the class-based stuff coming from vuex-module-decorators is just syntactic sugar - a wrapper around the vue-class-component API.</p>
  
  <p>To quote the <a href="https://championswimmer.in/vuex-module-decorators/pages/getting-started.html#define-a-module">docs</a>:</p>
  
  <blockquote>
  <p>In your store, you use the MyModule class itself as a module...The way we use the MyModule class is different from classical object-oriented programming and similar to how vue-class-component works. We use the class itself as module, not an object constructed by the class</p>
  </blockquote>
  
  <p>Another thing to keep in mind is to use <a href="https://vue-test-utils.vuejs.org/api/createlocalvue.html">createLocalVue</a>, which enables us to use Vue classes, plugins, components etc. without polluting the global Vue class.</p>
  
  <p>Adding the Vuex plugin to <code>createLocalVue</code>:<br>
  </p>
  
  <div class="highlight js-code-highlight">
  <pre class="highlight typescript"><code><span class="nx">localVue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Vuex</span><span class="p">);</span>
  </code></pre>
  <div class="highlight__panel js-actions-panel">
  <div class="highlight__panel-action js-fullscreen-code-action">
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
	  <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
  </svg>
  
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
	  <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
  </svg>
  
  </div>
  </div>
  </div>
  
  
  
  <p>The AuthModule class is declared as a Vuex (namespaced) module inside the Vuex.Store constructor (as per docs).<br>
  </p>
  
  <div class="highlight js-code-highlight">
  <pre class="highlight typescript"><code><span class="kd">const</span> <span class="nx">storeOptions</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">modules</span><span class="p">:</span> <span class="p">{</span>
	  <span class="na">auth</span><span class="p">:</span> <span class="nx">AuthModule</span><span class="p">,</span>
	<span class="p">},</span>
  <span class="p">};</span>
  
  <span class="kd">const</span> <span class="nx">createStore</span> <span class="o">=</span> <span class="p">(</span><span class="nx">storeOptions</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="p">{}):</span> <span class="nx">Store</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">auth</span><span class="p">:</span> <span class="nx">IState</span> <span class="p">}</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span> <span class="p">...</span><span class="nx">storeOptions</span> <span class="p">});</span>
  </code></pre>
  <div class="highlight__panel js-actions-panel">
  <div class="highlight__panel-action js-fullscreen-code-action">
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
	  <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
  </svg>
  
	  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
	  <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
  </svg>
  
  </div>
  </div>
  </div>
  
  
  
  <p>In the implementation above, AuthModule (incl. store, actions, mutations, getters...) is re-created inside every test case with the help of the <code>beforeEach</code> hook (to have a clean store in every new iteration).</p>
  
  <p>The rest is pretty straightforward. </p>
  
  <p>Check out how I tested each part of the AuthModule (actions, mutations, getters..).</p>
  
  <p>That's it. Happy unit testing :)</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ajax-portfolio-popup">
      <span class="ajax-loader"></span>
      <div class="navigation-wrap">
        <span class="popup-close">
          <i class="fas fa-times-circle"></i>
        </span>
      </div>
      <div class="content-wrap">
        <div class="container">
          <div class="row">
            <div class="col-md-10 offset-md-1">
              <div class="popup-heading"></div>
              <div class="popup-content"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type='text/javascript' src='../wp-includes/js/dist/vendor/regenerator-runtime.minb36a.js?ver=0.13.7' id='regenerator-runtime-js'></script>
    <script type='text/javascript' src='../wp-includes/js/dist/vendor/wp-polyfill.min2c7c.js?ver=3.15.0' id='wp-polyfill-js'></script>
    <script type='text/javascript' id='contact-form-7-js-extra'>
      var wpcf7 = {
        "api": {
          "root": "https:\/\/cosmos-themes.online\/themes\/watson\/wp-json\/",
          "namespace": "contact-form-7\/v1"
        }
      };
    </script>
    <script defer src="../wp-content/cache/autoptimize/js/autoptimize_61962f43b02c29872a14607372d50c08.js"></script>
  </body>
  <!-- Mirrored from cosmos-themes.online/themes/watson/latest-ui-trends-to-inspired-from/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Nov 2021 07:42:33 GMT -->
</html>