<!DOCTYPE html>
<html lang="en-US" data-random-animation="true" data-animation="animate-0">
  <!-- Mirrored from cosmos-themes.online/themes/watson/best-place-to-travel-this-summer/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Nov 2021 07:42:28 GMT -->
  <!-- Added by HTTrack -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <!-- /Added by HTTrack -->
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <link media="all" href="../wp-content/cache/autoptimize/css/autoptimize_4a3a25c402079694a1e90497bce44892.css" rel="stylesheet" />
    <title>Best Place To Travel This Summer &#8211; Watson</title>
    <meta name='robots' content='max-image-preview:large' />
    <link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
    <link rel='dns-prefetch' href='http://s.w.org/' />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Feed" href="../feed/index.html" />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Comments Feed" href="../comments/feed/index.html" />
    <link rel="alternate" type="application/rss+xml" title="Watson &raquo; Best Place To Travel This Summer Comments Feed" href="feed/index.html" />
    <script type="text/javascript">
      window._wpemojiSettings = {
        "baseUrl": "https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/",
        "ext": ".png",
        "svgUrl": "https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/",
        "svgExt": ".svg",
        "source": {
          "concatemoji": "https:\/\/cosmos-themes.online\/themes\/watson\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.2"
        }
      };
      ! function(e, a, t) {
        var n, r, o, i = a.createElement("canvas"),
          p = i.getContext && i.getContext("2d");

        function s(e, t) {
          var a = String.fromCharCode;
          p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, e), 0, 0);
          e = i.toDataURL();
          return p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, t), 0, 0), e === i.toDataURL()
        }

        function c(e) {
          var t = a.createElement("script");
          t.src = e, t.defer = t.type = "text/javascript", a.getElementsByTagName("head")[0].appendChild(t)
        }
        for (o = Array("flag", "emoji"), t.supports = {
            everything: !0,
            everythingExceptFlag: !0
          }, r = 0; r < o.length; r++) t.supports[o[r]] = function(e) {
          if (!p || !p.fillText) return !1;
          switch (p.textBaseline = "top", p.font = "600 32px Arial", e) {
            case "flag":
              return s([127987, 65039, 8205, 9895, 65039], [127987, 65039, 8203, 9895, 65039]) ? !1 : !s([55356, 56826, 55356, 56819], [55356, 56826, 8203, 55356, 56819]) && !s([55356, 57332, 56128, 56423, 56128, 56418, 56128, 56421, 56128, 56430, 56128, 56423, 56128, 56447], [55356, 57332, 8203, 56128, 56423, 8203, 56128, 56418, 8203, 56128, 56421, 8203, 56128, 56430, 8203, 56128, 56423, 8203, 56128, 56447]);
            case "emoji":
              return !s([10084, 65039, 8205, 55357, 56613], [10084, 65039, 8203, 55357, 56613])
          }
          return !1
        }(o[r]), t.supports.everything = t.supports.everything && t.supports[o[r]], "flag" !== o[r] && (t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && t.supports[o[r]]);
        t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && !t.supports.flag, t.DOMReady = !1, t.readyCallback = function() {
          t.DOMReady = !0
        }, t.supports.everything || (n = function() {
          t.readyCallback()
        }, a.addEventListener ? (a.addEventListener("DOMContentLoaded", n, !1), e.addEventListener("load", n, !1)) : (e.attachEvent("onload", n), a.attachEvent("onreadystatechange", function() {
          "complete" === a.readyState && t.readyCallback()
        })), (n = t.source || {}).concatemoji ? c(n.concatemoji) : n.wpemoji && n.twemoji && (c(n.twemoji), c(n.wpemoji)))
      }(window, document, window._wpemojiSettings);
    </script>
    <link rel='stylesheet' id='watson-heading-font-css' href='http://fonts.googleapis.com/css2?family=Playfair+Display%3Aital%2Cwght%400%2C400%3B0%2C500%3B0%2C600%3B0%2C700%3B0%2C800%3B0%2C900%3B1%2C400%3B1%2C500%3B1%2C600%3B1%2C700%3B1%2C800%3B1%2C900&amp;ver=1.0.0' type='text/css' media='all' />
    <link rel='stylesheet' id='watson-body-font-css' href='http://fonts.googleapis.com/css2?family=Roboto%3Aital%2Cwght%400%2C300%3B0%2C400%3B0%2C500%3B0%2C700%3B0%2C900%3B1%2C300%3B1%2C400%3B1%2C500%3B1%2C700%3B1%2C900&amp;ver=1.0.0' type='text/css' media='all' />
    <script type='text/javascript' src='../wp-includes/js/jquery/jquery.minaf6c.js?ver=3.6.0' id='jquery-core-js'></script>
    <link rel="https://api.w.org/" href="../wp-json/index.html" />
    <link rel="alternate" type="application/json" href="../wp-json/wp/v2/posts/116.json" />
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" />
    <meta name="generator" content="WordPress 5.8.2" />
    <link rel="canonical" href="index.html" />
    <link rel='shortlink' href='../indexd78c.html?p=116' />
    <link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed771c.json?url=https%3A%2F%2Fcosmos-themes.online%2Fthemes%2Fwatson%2Fbest-place-to-travel-this-summer%2F" />
    <link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embedf0f9?url=https%3A%2F%2Fcosmos-themes.online%2Fthemes%2Fwatson%2Fbest-place-to-travel-this-summer%2F&amp;format=xml" />
    <link rel="icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-32x32.png" sizes="32x32" />
    <link rel="icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-192x192.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="../wp-content/uploads/2021/05/cropped-watson-sicon-180x180.png" />
    <meta name="msapplication-TileImage" content="https://cosmos-themes.online/themes/watson/wp-content/uploads/2021/05/cropped-watson-sicon-270x270.png" />
  </head>
  <body class="post-template-default single single-post postid-116 single-format-standard wp-embed-responsive elementor-default elementor-kit-8">
    <div class="preloader">
      <div class="loader">
        <h4>DUSAN DIVAC
		</h4>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div id="page">
      <header>
        <div class="header-content">
          <div class="header-mobile">
            <h2>DUSAN DIVAC
			</h2>
          </div>
          <div class="header-main">
            <a class="header-toggle">
              <i class="menu-open fas fa-bars"></i>
              <i class="menu-close fas fa-times"></i>
            </a>
            <div class="header-main-inner" data-simplebar>
              <div class="nav-container">
                <div class="image-container">
                  <h2 class="header-name">DUSAN DIVAC
				</h2>
                  <img src="../wp-content/uploads/2021/05/profile-img.jpg" alt="Profile Image">
                </div>
                <nav id="primary-menu" class="nav-menu slide-menu">
                  <ul id="menu-main-menu" class="menu">
                    <li data-id="menu-item-54" class=" menu-item menu-item-type-post_type menu-item-object-page menu-item-home has-menu-icon">
                      <a href="../../../../index.html#home" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-home'></i>
                        </span>Home </a>
                    </li>
                    <li data-id="menu-item-57" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="../../../../index.html#about" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-user'></i>
                        </span>About Me </a>
                    </li>
                    <li data-id="menu-item-55" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="../../../../index.html#resume" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-license'></i>
                        </span>Resume </a>
                    </li>
                    <li data-id="menu-item-88" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="../../../../index.html#portfolio" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-briefcase'></i>
                        </span>Portfolio </a>
                    </li>
                    <li data-id="menu-item-89" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="../../../../index.html#blog" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-book'></i>
                        </span>Blog </a>
                    </li>
                    <li data-id="menu-item-70" class=" menu-item menu-item-type-post_type menu-item-object-page has-menu-icon">
                      <a href="../../../../index.html#contact" class="no-scroll">
                        <span class='nav-menu-icon'>
                          <i class='lnr lnr-envelope'></i>
                        </span>Contact </a>
                    </li>
                  </ul>
                </nav>
                <div class="nav-footer">
                  <ul class="social">
                    <li>
                      <a href="#">
                        <i class="fab fa-facebook-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-twitter-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-youtube-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-dribbble-square"></i>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fab fa-behance-square"></i>
                      </a>
                    </li>
                  </ul>
                  <div class="copy">
                    <p>2021 © Cosmos-Themes. <br>All Right Reserved. </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div id="sidebar">
        <div class="sidebar-button">
          <span class="icon">
            <i class="fa fa-arrow-left"></i>
          </span>
        </div>
        <div class="sidebar-content">
          <div class="sidebar-content-wrapper">
            <div id="search-2" class="watson-single-widget widget_meta widget_search">
              <form class="search-form" role="search" method="get" action="https://cosmos-themes.online/themes/watson/">
                <label>
                  <span class="screen-reader-text">Search for:</span>
                  <input type="search" class="search-field" placeholder="Search..." value="" name="s">
                </label>
                <input type="submit" class="search-submit" value="Search">
              </form>
            </div>
            <div id="recent-posts-2" class="watson-single-widget widget_meta widget_recent_entries">
              <h4 class="widget-title">Recent Posts</h4>
              <ul>
                <li>
                  <a href="../best-way-to-design/index.html">Best Way To Design</a>
                </li>
                <li>
                  <a href="../things-i-need-to-get-started/index.html">Things I Need To Get Started</a>
                </li>
                <li>
                  <a href="../my-current-workspace/index.html">My Current Workspace</a>
                </li>
                <li>
                  <a href="index.html" aria-current="page">Best Place To Travel This Summer</a>
                </li>
                <li>
                  <a href="../latest-ui-trends-to-inspired-from/index.html">Latest UI Trends To Inspired From</a>
                </li>
              </ul>
            </div>
            <div id="categories-3" class="watson-single-widget widget_meta widget_categories">
              <h4 class="widget-title">Categories</h4>
              <ul>
                <li class="cat-item cat-item-8">
                  <a href="../category/design/index.html">Design</a>
                </li>
                <li class="cat-item cat-item-6">
                  <a href="../category/lifestyle/index.html">Lifestyle</a>
                </li>
                <li class="cat-item cat-item-9">
                  <a href="../category/personal/index.html">Personal</a>
                </li>
                <li class="cat-item cat-item-5">
                  <a href="../category/technology/index.html">Technology</a>
                </li>
                <li class="cat-item cat-item-4">
                  <a href="../category/traveling/index.html">Traveling</a>
                </li>
                <li class="cat-item cat-item-7">
                  <a href="../category/web-design/index.html">Web Design</a>
                </li>
              </ul>
            </div>
            <div id="recent-comments-2" class="watson-single-widget widget_meta widget_recent_comments">
              <h4 class="widget-title">Recent Comments</h4>
              <ul id="recentcomments">
                <li class="recentcomments">
                  <span class="comment-author-link">Watson Admin</span> on <a href="../best-way-to-design/index.html#comment-6">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Terry K. Gaitan</span> on <a href="../best-way-to-design/index.html#comment-5">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Rebecca R. Smith</span> on <a href="../best-way-to-design/index.html#comment-4">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">Randy E. Oleary</span> on <a href="../best-way-to-design/index.html#comment-3">Best Way To Design</a>
                </li>
                <li class="recentcomments">
                  <span class="comment-author-link">John Doe</span> on <a href="../best-way-to-design/index.html#comment-2">Best Way To Design</a>
                </li>
              </ul>
            </div>
            <div id="meta-3" class="watson-single-widget widget_meta widget_meta">
              <h4 class="widget-title">Meta</h4>
              <ul>
                <li>
                  <a href="../wp-login.html">Log in</a>
                </li>
                <li>
                  <a href="../feed/index.html">Entries feed</a>
                </li>
                <li>
                  <a href="../comments/feed/index.html">Comments feed</a>
                </li>
                <li>
                  <a href="https://wordpress.org/">WordPress.org</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div id="main" class="site-main">
        <div id="post-116" class="post-page post-116 post type-post status-publish format-standard has-post-thumbnail hentry category-traveling tag-nature tag-outdoor tag-travel">
          <div class="post-image">
            <img src="../wp-content/uploads/2021/05/blog-4.jpg" alt="Post Image">
          </div>
          <div class="post-wrapper">
            <div class="post-container has-thumbnail">
              <div class="row">
                <div class="post-heading col-md-8 offset-md-2">
                  <div class="categories">
                    <a class="category-name" href="../category/traveling/index.html">Traveling</a>
                  </div>
                  <h1 class="post-title">ES modules in Node today</h1>
                  <span class="post-date">Mar 18, 202</span>
                </div>
                <div class="post-content col-md-10 offset-md-1">
                  
<h2>
	<a name="introduction" href="#introduction" class="anchor">
	</a>
	Introduction
  </h2>
  
  <blockquote>
  <p>“Before software can be reusable, it first has to be usable.” – <a href="https://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)">Ralph Johnson</a></p>
  </blockquote>
  
  <p><a href="https://en.wikipedia.org/wiki/Module">Modules</a> are independent building blocks of a software program. They are basically a design pattern that implements features of <a href="https://en.wikipedia.org/wiki/Modular_programming">m</a><a href="https://en.wikipedia.org/wiki/Modular_programming">odular design</a> in programming languages. The module system is supported in many languages and is quite popular since the way dependencies are handled, packaged, and managed determines how easy it is to work with a large and growing source code.</p>
  
  <p>In modular design, business logic pertaining to a particular feature or functionality is packaged (modularized) in a standardized format for reusability, flexibility, and for the sake of reducing complexity. This setup affords a loosely coupled system due to a smooth interface of communication, as there are no global variables or shared state.</p>
  
  <p>Although the concept of modules is <a href="https://en.wikipedia.org/wiki/Modular_programming#Terminology">quite different depending on the language</a>, they are akin to the idea of <a href="https://en.wikipedia.org/wiki/Module_pattern#Namespaces">namespaces</a> in languages like Java. Modules enable code organization by splitting a codebase into reusable components such that each performs individual functions and can be combined or composed to form larger functionalities or an entire application.</p>
  
  <p>In Node.js, the <a href="https://nodejs.org/docs/latest/api/modules.html#modules_modules">module system</a> has come a long way from its earlier adoption of <a href="https://requirejs.org/docs/commonjs.html">CommonJS</a>. Today, <a href="https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_ecmascript_modules">ECMAScript modules</a> (ES modules), though still <a href="https://nodejs.org/api/documentation.html#documentation_stability_index">experimental</a> at the time of writing, are the official standard for packaging code for reuse in both client- and server-side JavaScript.</p>
  
  <p><a href="https://logrocket.com/signup/"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QIqNZKME--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/f760c-1gpjapknnuyhu8esa3z0jga.png%3Fresize%3D1200%252C280%26ssl%3D1" alt="LogRocket Free Trial Banner" loading="lazy"></a></p>
  
  <h2>
	<a name="table-of-contents" href="#table-of-contents" class="anchor">
	</a>
	Table of contents
  </h2>
  
  <p>In this article, we are going to learn about ES modules in Node. However, we will briefly explore other ways of handling and organizing server-side code with CommonJS.</p>
  
  <p>Why? So that we have a point of reference to recognize the benefits of ES modules. In essence, we will learn about the challenges it tries to solve that earlier module systems were not adapted to solve.</p>
  
  <p>We will be looking at:</p>
  
  <ul>
  <li>
  <strong>An introduction to ES modules</strong> — here, we introduce ES modules in an exciting way</li>
  <li>
  <strong>A brief history of ES modules</strong> — here, we learn about the transition from the earlier module system to ES modules. We will also briefly examine how interoperable these modules systems are with one another</li>
  <li>
  <strong>Adding support for ES modules in Node</strong> — here, we learn about how we can incrementally add support for ES modules in Node. We also learn how to migrate an old codebase to start using ES modules</li>
  <li>
  <strong>Comparing and contrasting features</strong> — here, we will learn about the features of both these module systems and how they compare</li>
  <li><strong>ES modules moving forward</strong></li>
  </ul>
  
  <h2>
	<a name="prerequisites" href="#prerequisites" class="anchor">
	</a>
	Prerequisites
  </h2>
  
  <p>To easily follow along with this tutorial, it is advisable to have the latest version of Node.js installed. Instructions on how to do so are available in the <a href="https://nodejs.org/en/">Node documentation</a>.</p>
  
  <p>Also, for better context, readers may need to be fairly knowledgeable with the <a href="https://requirejs.org/docs/commonjs.html">CommonJS</a> module system in Node. It is equally welcoming for newcomers learning the Node.js module system or applying ES modules in their Node projects today.</p>
  
  <h2>
	<a name="introducing-es-modules" href="#introducing-es-modules" class="anchor">
	</a>
	Introducing ES modules
  </h2>
  
  <p>With the release of <a href="https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V13.md#2020-02-18-version-1390-current-codebytere">Node version 13.9.0</a>, <a href="https://nodejs.org/api/esm.html#esm_introduction">ES modules</a> can now be used without an experimental flag since they are enabled by default. With ES modules, modules are defined with the use of the <code>import</code> and <code>export</code> keywords instead of the <code>require()</code> function in CommonJS. Here is how they are used:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">sayLanguage</span><span class="p">(</span><span class="nx">language</span><span class="p">)</span> <span class="p">{</span>
	  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`I love </span><span class="p">${</span><span class="nx">language</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
	<span class="p">}</span>
  
  <span class="c1">//f.js</span>
  
  
  <span class="k">import</span> <span class="p">{</span><span class="nx">sayLanguage</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./f.js</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayLanguage</span><span class="p">(</span><span class="dl">'</span><span class="s1">JavaScript</span><span class="dl">'</span><span class="p">));</span>
  
  <span class="c1">//g.js</span>
  
  
  <span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="o">-</span><span class="nx">v</span>
  <span class="nx">v13</span><span class="p">.</span><span class="mf">7.0</span>
  <span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="nx">g</span><span class="p">.</span><span class="nx">js</span> 
  <span class="p">(</span><span class="nx">node</span><span class="p">:</span><span class="mi">77133</span><span class="p">)</span> <span class="nx">ExperimentalWarning</span><span class="p">:</span> <span class="nx">The</span> <span class="nx">ESM</span> <span class="nx">module</span> <span class="nx">loader</span> <span class="nx">is</span> <span class="nx">experimental</span><span class="p">.</span>
  <span class="nx">I</span> <span class="nx">love</span> <span class="nx">JavaScript</span><span class="o">!</span>
  <span class="kc">undefined</span>
  <span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span>
  </code></pre></div>
  
  
  
  <p>Details about these keyword bindings can be found in the spec <a href="https://tc39.es/ecma262/#prod-ModuleItem">here</a>. Also, we can peek at the Mozilla development network <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements">doc</a> for more information.</p>
  
  <blockquote>
  <p><strong>Note</strong> : The code snippet above shows the <code>ExperimentalWarning</code> for the module loader due to the Node version on my local machine. However, it is likely this would change in later Node versions.</p>
  </blockquote>
  
  <h2>
	<a name="adding-support-for-es-modules-in-node-today" href="#adding-support-for-es-modules-in-node-today" class="anchor">
	</a>
	Adding support for ES modules in Node today
  </h2>
  
  <p>This support was previously behind the <code>--experimental-module</code> flag. Though this is no longer required, the implementation remains experimental and subject to change.</p>
  
  <p>Files ending with <code>.mjs</code> or <code>.js</code> extensions (with the nearest <code>package.json</code> file with a field <code>type</code>) are treated as ES modules, as shown on <code>line 9</code> below:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="p">{</span>
	<span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es_modules_in_node</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">A sample for enabling ES Modules in Node.js</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">g.js</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	  <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1</span><span class="dl">"</span>
	<span class="p">},</span>
	<span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">keywords</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
	  <span class="dl">"</span><span class="s2">ES</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">MODULES</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">NODE</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">MODULES</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">JS</span><span class="dl">"</span>
	<span class="p">],</span>
	<span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alexander Nnakwue</span><span class="dl">"</span><span class="p">,</span>
	<span class="dl">"</span><span class="s2">license</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MIT</span><span class="dl">"</span>
  <span class="p">}</span>
  </code></pre></div>
  
  
  
  <p>So, in essence, when we run <code>node g.js</code> in the same folder as the above <code>package.json</code>, the file is treated as an ESM. Additionally, it is an ESM if we are passing string arguments to the Node.js standard input with flag <code>--input-type=module</code>.</p>
  
  <blockquote>
  <p><strong>Note</strong> : Without the <code>type</code> field in the parent <code>package.json</code> file, Node throws the error shown below:<br>
  </p>
  </blockquote>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="p">(</span><span class="nx">node</span><span class="p">:</span><span class="mi">2844</span><span class="p">)</span> <span class="nx">Warning</span><span class="p">:</span> <span class="nx">To</span> <span class="nx">load</span> <span class="nx">an</span> <span class="nx">ES</span> <span class="nx">module</span><span class="p">,</span> <span class="kd">set</span> <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">the</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span> <span class="nx">or</span> <span class="nx">use</span> <span class="nx">the</span> <span class="p">.</span><span class="nx">mjs</span> <span class="nx">extension</span><span class="p">.</span>
  </code></pre></div>
  
  
  
  <h2>
	<a name="package-scope" href="#package-scope" class="anchor">
	</a>
	Package scope
  </h2>
  
  <p>A package scope, defined by the <code>type</code> flag in a parent <code>package.json</code> file and all folders below it, is present in the current scope of that package, as explained earlier. Furthermore, files ending with the <code>.mjs</code> extension are always loaded as ES modules regardless of the scope of that package.</p>
  
  <p>In the same light, all other forms of files without extensions and without the <code>type</code> flag in the parent <code>package.json</code> file are treated as CommonJS. Additionally, files ending with <code>.cjs</code> extensions are treated as CJS modules regardless of package scope.</p>
  
  <h2>
	<a name="import-and-export-syntax" href="#import-and-export-syntax" class="anchor">
	</a>
	Import and export syntax
  </h2>
  
  <p>In ES modules, specifiers are like string-based file paths used after the <code>from</code> keyword. There are both <a href="https://nodejs.org/api/esm.html#esm_resolution_algorithm">algorithms</a> to load an ES module specifier and to determine the module format of a resolved URL. An example is shown below:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span><span class="nx">cat</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">animals</span><span class="dl">'</span><span class="p">;</span>
  </code></pre></div>
  
  
  
  <p>The <code>animal</code> specifier in this case is an npm package, for example. Other ways specifiers can be referenced include from both absolute and relative file paths or URLs, and paths within other packages. Examples are shown in this <a href="https://nodejs.org/api/esm.html#esm_import_specifiers">section</a> of the documentation.</p>
  
  <p>Although <code>import</code> statements are permitted only in ES modules, they can reference both an ESM or CommonJS modules. For example:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="k">import</span> <span class="nx">packageMain</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">commonjs-package</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Works</span>
  
  <span class="k">import</span> <span class="p">{</span> <span class="nx">method</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">commonjs-package</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Errors</span>
  </code></pre></div>
  
  
  
  <blockquote>
  <p><strong>Note</strong> : <a href="https://nodejs.org/api/esm.html#esm_import_statements">Import statements</a> that reference other types of files like JSON or Wasm are still experimental and require the <code>--experimental-json-modules</code> and <code>--experimental-wasm-modules</code> flags, respectively, to be passed. Details can be found <a href="https://nodejs.org/api/esm.html#esm_experimental_json_modules">here</a>.</p>
  </blockquote>
  
  <p>For exports in ES modules, we can make use of the following:</p>
  
  <ul>
  <li>Named exports
  </li>
  </ul>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Alex</span><span class="dl">"</span>
  </code></pre></div>
  
  
  
  <ul>
  <li>Default exports
  </li>
  </ul>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">sayName</span><span class="p">()</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">My name is Mat</span><span class="dl">'</span><span class="p">)}</span>
  </code></pre></div>
  
  
  
  <blockquote>
  <p><strong>Note</strong> : All built-in Node packages support all types of exports (named, default) described above.</p>
  </blockquote>
  
  <h2>
	<a name="package-entry-points" href="#package-entry-points" class="anchor">
	</a>
	Package entry points
  </h2>
  
  <p>There are now two fields that can define entry points for a package: <code>main</code> and <code>exports</code>. More details can be found in the <a href="https://nodejs.org/api/esm.html#esm_package_entry_points">documentation</a>.</p>
  
  <blockquote>
  <p><strong>Note</strong> : Despite the current support for ES modules in Node, there are still some known concerns with interoperability with CommonJS. We will explore this further in the section on interoperability.</p>
  </blockquote>
  
  <h2>
	<a name="commonjs-module-system" href="#commonjs-module-system" class="anchor">
	</a>
	CommonJS module system
  </h2>
  
  <p>Prior to the introduction of ES modules, the community relied heavily on CommonJS for packaging server-side JavaScript code. In the CommonJS module system, each file is treated as a module, which exposes a set of APIs (via a well-defined interface) with the use of the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#exports"><code>exports</code> object</a>. To understand this better, here is an example using the object created by the module system:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">sayName</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
	  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`My name is </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">.`</span><span class="p">)</span>
	<span class="p">};</span>
  
  <span class="kd">function</span> <span class="nx">sayAge</span><span class="p">(</span><span class="nx">age</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`I'm </span><span class="p">${</span><span class="nx">age</span><span class="p">}</span><span class="s2"> years old.`</span><span class="p">)</span>
	<span class="p">};</span>
  
  
  <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">sayName</span><span class="p">,</span> <span class="nx">sayAge</span><span class="p">};</span>
  <span class="c1">//a.js</span>
  </code></pre></div>
  
  
  
  <p>To use these functions (imported as modules in a different file), we can use the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#requireid"><code>require</code> function</a>. This accepts a module identifier (ID) specified by either a relative or an absolute path or by name, based on the module type of the exposed APIs, like so:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">sayName</span><span class="p">,</span> <span class="nx">sayAge</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./a</span><span class="dl">'</span><span class="p">)</span> 
  <span class="c1">// assuming a.js is in the same folder path</span>
  
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayName</span><span class="p">(</span><span class="dl">'</span><span class="s1">Alex</span><span class="dl">'</span><span class="p">))</span> <span class="c1">// My name is Alex.</span>
  
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayAge</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span> <span class="c1">// I'm 25 years old.</span>
  
  <span class="c1">//b.js</span>
  <span class="c1">//TO RUN THE CODE SAMPLE TYPE: $ node b.js on your terminal</span>
  </code></pre></div>
  
  
  
  <p>As we can see above, the <code>require</code> object returns the module content exported from the <code>a.js</code> file. To learn more about the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L187">implementation</a> of the <code>module</code>, <code>export</code>, and <code>require</code> keywords, we can peek at the module wrapper <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper">here</a>.</p>
  
  <p>The CommonJS specification is also available <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown">here</a>. The spec <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown#commonjs-modules">highlights</a> the minimum features that a module system must have in order to support and be interoperable with other module systems.</p>
  
  <p>The CommonJS implementation allows for a defined structure in how files are loaded. In this approach, code required from other files are loaded or parsed synchronously. For this reason, catching and detecting failure points or debugging code are easier and less tedious.</p>
  
  <p>Why? Because variables present in the modules or exported files are within the scope of that module or private to it and not in the global scope, as such errors are properly propagated. Also, because of the huge separation of concern, modules are loaded from parent to child, traversing down the dependency graph.</p>
  
  <blockquote>
  <p><strong>Note</strong> : When the wrapper function returns, the exports object is cached, then returned as the return value for the <code>require()</code> method. This is like a cycle. How? On the next call to the <code>module.exports</code> method, the same process of wrapping the module with the wrapper function is repeated. But not without checking if that module is already stored in the cache.</p>
  </blockquote>
  
  <p>The signature of the wrapper function is shown below:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">__filename</span><span class="p">,</span> <span class="nx">__dirname</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Module code actually lives in here</span>
  <span class="p">});</span>
  </code></pre></div>
  
  
  
  <p>The <code>Module</code> object, which takes in an ID and a parent module as parameters, contains the <code>export</code> object:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">Module</span><span class="p">(</span><span class="nx">id</span> <span class="o">=</span> <span class="dl">''</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
	<span class="nx">updateChildren</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">};</span>
  </code></pre></div>
  
  
  
  <p>The <code>updateChildren</code> method scans through the file path until the root of the file system is reached. Its job is to update the <code>children</code> property of the <code>Module</code> object with the new <code>parent</code>, as the case may be. Here is the signature below:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">updateChildren</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">scan</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">scan</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">child</span><span class="p">)))</span>
	 <span class="nx">children</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
  <span class="p">}</span>
  </code></pre></div>
  
  
  
  <p>Let’s see an example to understand this better. In the <code>b.js</code> file above, add this line of code to print the module and the argument object:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  </code></pre></div>
  
  
  
  <p>After running <code>node b.js</code>, we get the following output:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="nx">b</span><span class="p">.</span><span class="nx">js</span>
  <span class="nx">My</span> <span class="nx">name</span> <span class="nx">is</span> <span class="nx">Alex</span><span class="p">.</span>
  <span class="kc">undefined</span>
  <span class="nx">I</span><span class="dl">'</span><span class="s1">m 25 years old.
  undefined
  &lt;ref *1&gt; Module {
	id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
	path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
	exports: {},
	parent: null,
	filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
	loaded: false,
	children: [
	  Module {
		id: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
		path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
		exports: [Object],
		parent: [Circular *1],
		filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
		loaded: true,
		children: [],
		paths: [Array]
	  }
	],
	paths: [
	  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
	  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
	  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
	  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
	  </span><span class="dl">'</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">
	]
  } [Arguments] {
	</span><span class="dl">'</span><span class="mi">0</span><span class="dl">'</span><span class="s1">: {},
	</span><span class="dl">'</span><span class="mi">1</span><span class="dl">'</span><span class="s1">: [Function: require] {
	  resolve: [Function: resolve] { paths: [Function: paths] },
	  main: Module {
		id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
		path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
		exports: {},
		parent: null,
		filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
		loaded: false,
		children: [Array],
		paths: [Array]
	  },
	  extensions: [Object: null prototype] {
		</span><span class="dl">'</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Function (anonymous)],
		</span><span class="dl">'</span><span class="p">.</span><span class="nx">json</span><span class="dl">'</span><span class="s1">: [Function (anonymous)],
		</span><span class="dl">'</span><span class="p">.</span><span class="nx">node</span><span class="dl">'</span><span class="s1">: [Function (anonymous)]
	  },
	  cache: [Object: null prototype] {
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Module],
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Module]
	  }
	},
	</span><span class="dl">'</span><span class="mi">2</span><span class="dl">'</span><span class="s1">: Module {
	  id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
	  path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
	  exports: {},
	  parent: null,
	  filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
	  loaded: false,
	  children: [ [Module] ],
	  paths: [
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
		</span><span class="dl">'</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">
	  ]
	},
	</span><span class="dl">'</span><span class="mi">3</span><span class="dl">'</span><span class="s1">: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
	</span><span class="dl">'</span><span class="mi">4</span><span class="dl">'</span><span class="s1">: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">
  }
  </span></code></pre></div>
  
  
  
  <p>As shown above, we can see the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L156">module object</a> on line 6 with all the properties, including the <code>filename</code>, <code>id</code>, <code>children</code>, path depth, etc. Also, we can see the <code>argument</code> object, which consists of the <code>export</code> object, <code>require</code> function, file and folder path, and the <code>Module</code> (which is essentially what the wrapper function does, but it executes the code contained in a file/module).</p>
  
  <p>Finally, as an exercise, we can go ahead and print the <code>require</code> function in the <code>b.js</code> file. To learn more about the output of the <code>require</code> function, we can check the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L1087">implementation</a> in this section of the Node source code.</p>
  
  <blockquote>
  <p><strong>Note</strong> : Special emphasis should be placed on the <code>load</code> and <code>validateString</code> methods. The <code>validateString</code> method, as its name implies, checks whether the passed-in module ID is a valid string. To understand the require function on a much higher level, you can check the <a href="https://nodejs.org/en/knowledge/getting-started/what-is-require/">Knowledge section</a> of the Node documentation.</p>
  </blockquote>
  
  <h2>
	<a name="interoperability-for-both-module-systems" href="#interoperability-for-both-module-systems" class="anchor">
	</a>
	Interoperability for both module systems
  </h2>
  
  <p>In CommonJS, <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper">modules are wrapped as functions</a> before they are evaluated at runtime. For ES modules, code reuse provided via <code>import</code> and <code>export</code> <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#21-types">binding</a> are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#31-async-loading">created or loaded</a> asynchronously before they are evaluated. To understand how ESM works under the hood, you can check <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations">here</a>. Now let’s explore further 🙂</p>
  
  <p>For a quick comparison, a CommonJS module goes through this phase in its lifecycle:</p>
  
  <p><em>Resolution –&gt; Loading –&gt; Wrapping –&gt; Evaluation –&gt; Caching</em></p>
  
  <p>This validates the fact that for CommonJS, there is no way to determine what gets exported as a module until the module is wrapped and evaluated. This is quite different for ES modules, as the imported symbols are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations">parsed and understood by the language</a> before the code gets evaluated.</p>
  
  <p>When the code is parsed, just before it is evaluated, an internal <a href="https://tc39.es/ecma262/#sec-source-text-module-records">Module Record</a> is created, and only after this data structure is well-formed are the files parsed and the code evaluated.</p>
  
  <p>For example:<br>
  </p>
  
  <div class="highlight"><pre class="highlight jsx"><code><span class="c1">//d.mjs</span>
  <span class="kd">const</span> <span class="nx">check</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Just checking`);
  };
  export.check = check;
  
  
  //e.mjs assuming they are on the same folder path
  import {check} from </span><span class="dl">'</span><span class="p">.</span><span class="o">/</span><span class="nx">d</span><span class="dl">'</span><span class="s1">
  </span></code></pre></div>
  
  
  
  <p>In the <code>e.mjs</code> file above, Node.js parses and validates the imports before going further to execute or evaluate the piece of code. This is not the case for a CommonJS module: the exported symbols are only made known after the module is wrapped and evaluated.</p>
  
  <p>This incompatibility is one of the many reasons the standard body in charge of ECMAScript intended to implement interoperability for both ESM and Node’s existing CommonJS module system.</p>
  
  <p>Furthermore, the <a href="https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm">current specifier resolution</a> does not support all default behavior of the CommonJS loader. One of the major differences is automatic resolution of file extensions and the ability to import directories that have an index file.</p>
  
  <p>For example, if we do an <code>import './directory'</code> from, say, a directory that has an <code>index.js</code>, ES modules does not look for an <code>index.js</code> file in the specified folder, as was the case in CommonJS. Instead, it throws an error. This can be fixed by passing the experimental flag <code>--experimental-specifier-resolution=[mode]</code>.</p>
  
  <blockquote>
  <p><strong>Note</strong> : To customize the default module resolution, loader hooks can optionally be provided via the <code>--experimental-loader ./loader-name.mjs</code> argument to Node.js. The loaders APIs are currently being redesigned, which means they would change in the future.</p>
  </blockquote>
  
  <p>More details about interoperability with CommonJS can be found in this <a href="https://nodejs.org/api/esm.html#esm_interoperability_with_commonjs">section</a> of the documentation.</p>
  
  <h2>
	<a name="features-of-both-module-systems" href="#features-of-both-module-systems" class="anchor">
	</a>
	Features of both module systems
  </h2>
  
  <ul>
  <li>Dynamic <code>import()</code> is supported in both CommonJS and ES modules. It can be used to include ES module files from CommonJS code.</li>
  <li>ECMAScript 6 also provides that modules can be loaded from a URL, while CommonJS is limited to relative and absolute file paths. <a href="https://nodejs.org/api/esm.html#esm_https_loader">This new improvement</a> not only makes loading more complicated, but also slow.</li>
  <li>Sources that are in formats Node.js doesn’t understand can be converted into JavaScript. More details can be found <a href="https://nodejs.org/api/esm.html#esm_transpiler_loader">here</a>.</li>
  <li>Support for <a href="https://github.com/WICG/import-maps#extension-less-imports">extensionless main entry points</a> in ESM has been dropped.</li>
  <li>In the current release of the standard, loading internal modules from disk has been enabled, as specified in the <a href="https://github.com/nodejs/node/pull/31321">changelog</a>.</li>
  <li>
  <a href="https://github.com/tc39/proposal-import-meta">proposal-import-meta</a> provides the absolute URL of the current ES module file. It is currently a stage 3 proposal in the TC39 spec.</li>
  <li>The dynamic imports proposal, currently in stage 4 of the TC39 draft, can be used to import both ES and CommonJS modules. Note that this statement returns a promise.</li>
  <li>A file extension must be provided when using the <code>import</code> keyword. Directory indexes (e.g., <code>'./database/index.js'</code>) must be fully specified.</li>
  <li>Dual CommonJS and ESM are now possible with the use of <a href="https://nodejs.org/api/esm.html#esm_conditional_exports">conditional exports.</a> Now, Node.js can run ES module entry points, and a package can contain both CommonJS and ESM entry points.</li>
  </ul>
  
  <blockquote>
  <p><strong>Note</strong> : Function <code>require</code> shouldn’t be used in ES modules.</p>
  </blockquote>
  
  <h2>
	<a name="es-modules-moving-forward" href="#es-modules-moving-forward" class="anchor">
	</a>
	ES modules moving forward
  </h2>
  
  <p>ES modules is still tagged experimental since the feature is not fully ready for production environments. This is because there is a need to remove current changes that lack support for backwards compatibility.</p>
  
  <p>The challenge, therefore, is upon package authors, maintainers, and developers to be explicit with package naming and other useful conventions. More details about this can be found <a href="https://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards">here</a>.</p>
  
  <blockquote>
  <p>“The main goal is to preserve backward compatibility moving forward, now that Node.js supports both CommonJS and ES modules.”</p>
  </blockquote>
  
  <p>Nowadays, it is possible to use both CommonJS and ESM in one application, but there are still some issues associated with it. CommonJS modules need to know if the module being loaded is a CommonJS or an ES module since the latter is loaded only asynchronously.</p>
  
  <p>Also, in accordance with the ESM spec, using the <code>import</code> keyword does not complete the file path by default with the file name extension, as for CommonJS modules. Therefore, this must be explicitly stated.</p>
  
  <h2>
	<a name="conclusion-and-next-steps" href="#conclusion-and-next-steps" class="anchor">
	</a>
	Conclusion and next steps
  </h2>
  
  <p>Prior to the introduction of the ES6 standard, there wasn’t any native implementation for organizing source code in server-side JavaScript. The community relied heavily on CommonJS module format.</p>
  
  <p>Nowadays, with the introduction of ES modules, developers can enjoy the many benefits associated with the release specification. This article has highlighted the transition between both module systems and their interoperability.</p>
  
  <p>Finally, due to the existing incompatibility issues between both module formats, the current transition from CommonJS to ESM would be quite a challenge due to the issues we have highlighted in this article. Tools like <a href="https://babeljs.io/">Babel</a> and <a href="https://github.com/standard-things/esm#readme">esm</a>, which translate the newer syntax into code compatible with older environments, can make the transition easier.</p>
  
  <p>In the long run, this entire draft process is an important step and paves the way for further future improvements. Let me know if you have any questions in the comment section below, or message me on my <a href="https://twitter.com/alex_nnakwue">Twitter handle</a>. Thanks for reading 🙂</p>
  
  
  <hr>
  
  <h2>
	<a name="200s-only-%E2%80%8E-monitor-failed-and-show-graphql-requests-in-production" href="#200s-only-%E2%80%8E-monitor-failed-and-show-graphql-requests-in-production" class="anchor">
	</a>
	200's only ‎✅: Monitor failed and show GraphQL requests in production
  </h2>
  
  <p>While GraphQL has some features for debugging requests and responses, making sure GraphQL reliably serves resources to your production app is where things get tougher. If you’re interested in ensuring network requests to the backend or third party services are successful, <a href="https://www2.logrocket.com/signup-lr">try LogRocket.</a></p>
  
  <p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UHOs84WY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jd2amkhuiynfjf3i33qk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UHOs84WY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jd2amkhuiynfjf3i33qk.png" alt="Alt Text" loading="lazy"></a></p>
  
  <p><a href="https://www2.logrocket.com/signup-lr">LogRocket</a> is like a DVR for web apps, recording literally everything that happens on your site. Instead of guessing why problems happen, you can aggregate and report on problematic GraphQL requests to quickly understand the root cause. In addition, you can track Apollo client state and inspect GraphQL queries' key-value pairs.</p>
  
  <p>LogRocket instruments your app to record baseline performance timings such as page load time, time to first byte, slow network requests, and also logs Redux, NgRx, and Vuex actions/state. <a href="https://www2.logrocket.com/signup-lr">Start monitoring for free.</a></p>
  
  
  <hr>
  
  <!-- <p>The post <a href="https://blog.logrocket.com/es-modules-in-node-today/">ES modules in Node today</a> appeared first on <a href="https://blog.logrocket.com">LogRocket Blog</a>.</p>
   -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ajax-portfolio-popup">
      <span class="ajax-loader"></span>
      <div class="navigation-wrap">
        <span class="popup-close">
          <i class="fas fa-times-circle"></i>
        </span>
      </div>
      <div class="content-wrap">
        <div class="container">
          <div class="row">
            <div class="col-md-10 offset-md-1">
              <div class="popup-heading"></div>
              <div class="popup-content"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type='text/javascript' src='../wp-includes/js/dist/vendor/regenerator-runtime.minb36a.js?ver=0.13.7' id='regenerator-runtime-js'></script>
    <script type='text/javascript' src='../wp-includes/js/dist/vendor/wp-polyfill.min2c7c.js?ver=3.15.0' id='wp-polyfill-js'></script>
    <script type='text/javascript' id='contact-form-7-js-extra'>
      var wpcf7 = {
        "api": {
          "root": "https:\/\/cosmos-themes.online\/themes\/watson\/wp-json\/",
          "namespace": "contact-form-7\/v1"
        }
      };
    </script>
    <script defer src="../wp-content/cache/autoptimize/js/autoptimize_61962f43b02c29872a14607372d50c08.js"></script>
  </body>
  <!-- Mirrored from cosmos-themes.online/themes/watson/best-place-to-travel-this-summer/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Nov 2021 07:42:30 GMT -->
</html>